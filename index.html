<!DOCTYPE html>
<html>
<head>
    <title>Daily Do Good Typing Skill Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #fffde7;
            margin: 0; padding: 0;
        }
        .header {
            font-size: 36px;
            font-weight: bold;
            color: #ff9800;
            text-align: center;
            margin-top: 28px;
            letter-spacing: 2px;
        }
        .poem-box {
            background: #fff176;
            border-radius: 13px;
            padding: 18px 24px 18px 24px;
            margin: 20px auto;
            width: 75%;
            color: #ff6f00;
            font-size: 20px;
        }
        textarea {
            width: 75%;
            height: 70px;
            font-size: 17px;
            border: 2px solid #ffa726;
            border-radius: 12px;
            margin-bottom: 12px;
            background: #fffde7;
            color: #d84315;
            display:block;
            margin-left:auto;
            margin-right:auto;
        }
        .result-box {
            background: #ffe0b2;
            border-radius: 12px;
            width: 400px;
            margin: 28px auto 10px auto;
            padding: 25px 10px;
            box-shadow: 0px 2px 14px #ffd180a8;
        }
        .stat, .grade, .history-list {
            text-align: center;
            font-size: 18px;
            margin-top: 6px;
        }
        .grade { font-size: 24px; font-weight: bold;}
        .start-btn {
            font-size: 18px;
            background: #ffb300;
            color: #fff;
            border: none;
            border-radius: 7px;
            padding: 9px 35px;
            cursor: pointer;
            margin-bottom: 12px;
        }
        .start-btn:hover { background: #ff9800; }

        .history {
            background: #fff3e0;
            border-radius: 8px;
            width: 420px;
            margin: 10px auto;
            padding: 10px 5px;
        }
        .line {
            font-size: 20px;
            color: #e65100;
            margin: 7px 0;
        }
    </style>
</head>
<body>
    <div class="header">Daily Do Good</div>
    <div class="poem-box" id="poemBox"></div>
    <textarea id="input" placeholder="Type the line here..."></textarea>
    <div class="stat">
        <button class="start-btn" onclick="startTest()">Start Test</button>
        <span id="timer" style="color:#fb8c00;">Time: 60s</span>
    </div>
    <div class="result-box" id="resultBox" style="display:none;"></div>
    <div class="history" id="historyBox"></div>
    <script>
        const poemLines = [
            "Father to son, father to child,",
            "A silence surrounds their words,",
            "The story lingers, never mild.",
            "Long is the path, and slow the miles.",
            "Dreams light up the deepest night.",
            "Mountains high, rivers wide.",
            "Their love is calm, their fears are bright.",
            "With open hearts, they confide.",
        ];
        let timer = 60;
        let started = false;
        let interval;
        let currentLine = 0;
        let totalWords = 0, totalCorrect = 0, totalMistakes = 0;
        let history = [];
        function showLine() {
            let txt = '';
            for(let i=0; i<=currentLine; i++){
                txt += `<div class="line">${poemLines[i]}</div>`;
            }
            document.getElementById('poemBox').innerHTML = txt;
        }
        function startTest() {
            timer = 60;
            started = true;
            currentLine = 0;
            totalWords = 0;
            totalCorrect = 0;
            totalMistakes = 0;
            document.getElementById('resultBox').style.display = "none";
            document.getElementById('input').value = "";
            showLine();
            document.getElementById('timer').textContent = "Time: 60s";
            document.getElementById('input').disabled = false;
            interval = setInterval(() => {
                timer--;
                document.getElementById('timer').textContent = "Time: " + timer + "s";
                if (timer <= 0) {
                    finishTest();
                }
            }, 1000);
        }
        document.getElementById('input').addEventListener('input', function() {
            let userInput = this.value.trim();
            if(!started || timer<=0) return;
            if(userInput === poemLines[currentLine]) {
                totalWords += poemLines[currentLine].split(/\s+/).length;
                totalCorrect += poemLines[currentLine].split(/\s+/).length;
                currentLine++;
                this.value="";
                showLine();
                if(currentLine >= poemLines.length) finishTest();
            }
        });
        function finishTest() {
            started = false;
            clearInterval(interval);
            document.getElementById('input').disabled = true;
            let wpm = Math.round(totalWords/1); // 60s = 1 min
            let grade = "";
            if(wpm>=50) grade = "A+";
            else if(wpm>=40) grade = "A";
            else if(wpm>=30) grade = "B";
            else if(wpm>=20) grade = "C";
            else if(wpm>=10) grade = "D";
            else grade = "F";
            let date = new Date();
            let dt = `${date.getDate().toString().padStart(2,0)}/${(date.getMonth()+1).toString().padStart(2,0)}/${date.getFullYear()}, ${date.toLocaleTimeString()}`;
            history.unshift({wpm, grade, date:dt});
            if(history.length>10) history.pop();
            document.getElementById('resultBox').innerHTML =
                `<div class="grade">Grade: ${grade}</div>
                 <div class="stat">Words per minute (WPM): ${wpm}</div>
                 <div class="stat">Date & Time: ${dt}</div>`;
            document.getElementById('resultBox').style.display="block";
            showHistory();
        }
        function showHistory() {
            let txt = "<b>Test History (Last 10):</b><br>";
            history.forEach((item,i) => {
                txt += `${i+1}. Grade: ${item.grade} | WPM: ${item.wpm} | ${item.date}<br>`;
            });
            document.getElementById('historyBox').innerHTML = txt;
        }
        showLine();
    </script>
</body>
</html>
